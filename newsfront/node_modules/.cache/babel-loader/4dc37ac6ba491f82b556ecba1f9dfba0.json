{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Truncate = function (_Component) {\n  _inherits(Truncate, _Component);\n\n  function Truncate() {\n    var _ref;\n\n    _classCallCheck(this, Truncate);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _this = _possibleConstructorReturn(this, (_ref = Truncate.__proto__ || Object.getPrototypeOf(Truncate)).call.apply(_ref, [this].concat(args)));\n\n    _this.state = {};\n    _this.styles = {\n      ellipsis: {\n        position: 'fixed',\n        visibility: 'hidden',\n        top: 0,\n        left: 0\n      }\n    };\n    _this.onResize = _this.onResize.bind(_this);\n    _this.onTruncate = _this.onTruncate.bind(_this);\n    _this.calcTargetWidth = _this.calcTargetWidth.bind(_this);\n    _this.measureWidth = _this.measureWidth.bind(_this);\n    _this.getLines = _this.getLines.bind(_this);\n    _this.renderLine = _this.renderLine.bind(_this);\n    return _this;\n  }\n\n  _createClass(Truncate, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Node not needed in document tree to read its content\n      this.refs.text.parentNode.removeChild(this.refs.text); // Keep node in document body to read .offsetWidth\n\n      document.body.appendChild(this.refs.ellipsis);\n      var canvas = document.createElement('canvas');\n      this.canvas = canvas.getContext('2d');\n      window.addEventListener('resize', this.onResize);\n      this.onResize();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      // Render was based on outdated refs and needs to be rerun\n      if (this.props.children !== prevProps.children) {\n        this.forceUpdate();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      document.body.removeChild(this.refs.ellipsis);\n      window.removeEventListener('resize', this.onResize);\n      cancelAnimationFrame(this.timeout);\n    } // Shim innerText to consistently break lines at <br/> but not at \\n\n\n  }, {\n    key: 'innerText',\n    value: function innerText(node) {\n      var div = document.createElement('div');\n      div.innerHTML = node.innerHTML.replace(/\\r\\n|\\r|\\n/g, ' ');\n      var text = div.innerText;\n      var test = document.createElement('div');\n      test.innerHTML = 'foo<br/>bar';\n\n      if (test.innerText.replace(/\\r\\n|\\r/g, '\\n') !== 'foo\\nbar') {\n        div.innerHTML = div.innerHTML.replace(/<br.*?[\\/]?>/gi, '\\n');\n        text = div.innerText;\n      }\n\n      return text;\n    }\n  }, {\n    key: 'onResize',\n    value: function onResize() {\n      this.calcTargetWidth();\n    }\n  }, {\n    key: 'onTruncate',\n    value: function onTruncate(didTruncate) {\n      var onTruncate = this.props.onTruncate;\n\n      if (typeof onTruncate === 'function') {\n        this.timeout = requestAnimationFrame(function () {\n          onTruncate(didTruncate);\n        });\n      }\n    }\n  }, {\n    key: 'calcTargetWidth',\n    value: function calcTargetWidth() {\n      var target = this.refs.target,\n          calcTargetWidth = this.calcTargetWidth,\n          canvas = this.canvas; // Calculation is no longer relevant, since node has been removed\n\n      if (!target) {\n        return;\n      }\n\n      var targetWidth = this.props.options.fixedWidth || target.parentNode.getBoundingClientRect().width; // Delay calculation until parent node is inserted to the document\n      // Mounting order in React is ChildComponent, ParentComponent\n\n      if (!targetWidth) {\n        return requestAnimationFrame(calcTargetWidth);\n      }\n\n      var style = window.getComputedStyle(target);\n      var font = [style['font-weight'], style['font-style'], style['font-size'], style['font-family']].join(' ');\n      canvas.font = font;\n      this.setState({\n        targetWidth: targetWidth\n      });\n    }\n  }, {\n    key: 'measureWidth',\n    value: function measureWidth(text) {\n      return this.canvas.measureText(text).width;\n    }\n  }, {\n    key: 'ellipsisWidth',\n    value: function ellipsisWidth(node) {\n      return node.offsetWidth;\n    }\n  }, {\n    key: 'getLines',\n    value: function getLines() {\n      var refs = this.refs,\n          _props = this.props,\n          numLines = _props.lines,\n          ellipsis = _props.ellipsis,\n          targetWidth = this.state.targetWidth,\n          innerText = this.innerText,\n          measureWidth = this.measureWidth,\n          onTruncate = this.onTruncate;\n      var lines = [];\n      var text = innerText(refs.text);\n      var textLines = text.split('\\n').map(function (line) {\n        return line.split(' ');\n      });\n      var didTruncate = true;\n      var ellipsisWidth = this.ellipsisWidth(this.refs.ellipsis);\n\n      for (var line = 1; line <= numLines; line++) {\n        var textWords = textLines[0]; // Handle newline\n\n        if (textWords.length === 0) {\n          lines.push();\n          textLines.shift();\n          line--;\n          continue;\n        }\n\n        var resultLine = textWords.join(' ');\n\n        if (measureWidth(resultLine) < targetWidth) {\n          if (textLines.length === 1) {\n            // Line is end of text and fits without truncating //\n            didTruncate = false;\n            lines.push(resultLine);\n            break;\n          }\n        }\n\n        if (line === numLines) {\n          // Binary search determining the longest possible line inluding truncate string //\n          var textRest = textWords.join(' ');\n          var lower = 0;\n          var upper = textRest.length - 1;\n\n          while (lower <= upper) {\n            var middle = Math.floor((lower + upper) / 2);\n            var testLine = textRest.slice(0, middle + 1);\n\n            if (measureWidth(testLine) + ellipsisWidth <= targetWidth) {\n              lower = middle + 1;\n            } else {\n              upper = middle - 1;\n            }\n          }\n\n          resultLine = _react2.default.createElement('span', null, textRest.slice(0, lower), ellipsis);\n        } else {\n          // Binary search determining when the line breaks //\n          var _lower = 0;\n\n          var _upper = textWords.length - 1;\n\n          while (_lower <= _upper) {\n            var _middle = Math.floor((_lower + _upper) / 2);\n\n            var _testLine = textWords.slice(0, _middle + 1).join(' ');\n\n            if (measureWidth(_testLine) <= targetWidth) {\n              _lower = _middle + 1;\n            } else {\n              _upper = _middle - 1;\n            }\n          } // The first word of this line is too long to fit it\n\n\n          if (_lower === 0) {\n            // Jump to processing of last line\n            line = numLines - 1;\n            continue;\n          }\n\n          resultLine = textWords.slice(0, _lower).join(' ');\n          textLines[0].splice(0, _lower);\n        }\n\n        lines.push(resultLine);\n      }\n\n      onTruncate(didTruncate);\n      return lines;\n    }\n  }, {\n    key: 'renderLine',\n    value: function renderLine(line, i, arr) {\n      if (i === arr.length - 1) {\n        return _react2.default.createElement('span', {\n          key: i\n        }, line);\n      }\n\n      var br = _react2.default.createElement('br', {\n        key: i + 'br'\n      });\n\n      if (line) {\n        return [_react2.default.createElement('span', {\n          key: i\n        }, line), br];\n      }\n\n      return br;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var target = this.refs.target,\n          _props2 = this.props,\n          children = _props2.children,\n          ellipsis = _props2.ellipsis,\n          lines = _props2.lines,\n          spanProps = _objectWithoutProperties(_props2, ['children', 'ellipsis', 'lines']),\n          targetWidth = this.state.targetWidth,\n          getLines = this.getLines,\n          renderLine = this.renderLine,\n          onTruncate = this.onTruncate;\n\n      var text = children;\n\n      if (typeof window !== 'undefined') {\n        if (target && targetWidth && lines > 0) {\n          text = getLines().map(renderLine);\n        } else {\n          onTruncate(false);\n        }\n      }\n\n      delete spanProps.onTruncate;\n      delete spanProps.options;\n      return _react2.default.createElement('span', _extends({}, spanProps, {\n        ref: 'target'\n      }), text, _react2.default.createElement('span', {\n        ref: 'text'\n      }, children), _react2.default.createElement('span', {\n        ref: 'ellipsis',\n        style: this.styles.ellipsis\n      }, ellipsis));\n    }\n  }]);\n\n  return Truncate;\n}(_react.Component);\n\nTruncate.propTypes = {\n  children: _react.PropTypes.node,\n  ellipsis: _react.PropTypes.node,\n  lines: _react.PropTypes.oneOfType([_react.PropTypes.oneOf([false]), _react.PropTypes.number]),\n  options: _react.PropTypes.object,\n  onTruncate: _react.PropTypes.func\n};\nTruncate.defaultProps = {\n  children: '',\n  ellipsis: '…',\n  options: {},\n  lines: 1\n};\nexports.default = Truncate;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["C:/Users/loren/OneDrive/桌面/hw8/newsfront/node_modules/react-read-more/lib/Truncate.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","obj","__esModule","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","Truncate","_Component","_ref","_len","args","Array","_key","_this","getPrototypeOf","apply","concat","state","styles","ellipsis","position","visibility","top","left","onResize","bind","onTruncate","calcTargetWidth","measureWidth","getLines","renderLine","componentDidMount","refs","text","parentNode","removeChild","document","body","appendChild","canvas","createElement","getContext","window","addEventListener","componentDidUpdate","prevProps","children","forceUpdate","componentWillUnmount","removeEventListener","cancelAnimationFrame","timeout","innerText","node","div","innerHTML","replace","test","didTruncate","requestAnimationFrame","targetWidth","options","fixedWidth","getBoundingClientRect","width","style","getComputedStyle","font","join","setState","measureText","ellipsisWidth","offsetWidth","_props","numLines","lines","textLines","split","map","line","textWords","push","shift","resultLine","textRest","lower","upper","middle","Math","floor","testLine","slice","_lower","_upper","_middle","_testLine","splice","arr","br","render","_props2","spanProps","ref","Component","propTypes","PropTypes","oneOfType","oneOf","number","object","func","defaultProps","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Truncate = function (_Component) {\n  _inherits(Truncate, _Component);\n\n  function Truncate() {\n    var _ref;\n\n    _classCallCheck(this, Truncate);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _this = _possibleConstructorReturn(this, (_ref = Truncate.__proto__ || Object.getPrototypeOf(Truncate)).call.apply(_ref, [this].concat(args)));\n\n    _this.state = {};\n    _this.styles = {\n      ellipsis: {\n        position: 'fixed',\n        visibility: 'hidden',\n        top: 0,\n        left: 0\n      }\n    };\n\n\n    _this.onResize = _this.onResize.bind(_this);\n    _this.onTruncate = _this.onTruncate.bind(_this);\n    _this.calcTargetWidth = _this.calcTargetWidth.bind(_this);\n    _this.measureWidth = _this.measureWidth.bind(_this);\n    _this.getLines = _this.getLines.bind(_this);\n    _this.renderLine = _this.renderLine.bind(_this);\n    return _this;\n  }\n\n  _createClass(Truncate, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Node not needed in document tree to read its content\n      this.refs.text.parentNode.removeChild(this.refs.text);\n\n      // Keep node in document body to read .offsetWidth\n      document.body.appendChild(this.refs.ellipsis);\n\n      var canvas = document.createElement('canvas');\n      this.canvas = canvas.getContext('2d');\n\n      window.addEventListener('resize', this.onResize);\n\n      this.onResize();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      // Render was based on outdated refs and needs to be rerun\n      if (this.props.children !== prevProps.children) {\n        this.forceUpdate();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      document.body.removeChild(this.refs.ellipsis);\n\n      window.removeEventListener('resize', this.onResize);\n\n      cancelAnimationFrame(this.timeout);\n    }\n\n    // Shim innerText to consistently break lines at <br/> but not at \\n\n\n  }, {\n    key: 'innerText',\n    value: function innerText(node) {\n      var div = document.createElement('div');\n      div.innerHTML = node.innerHTML.replace(/\\r\\n|\\r|\\n/g, ' ');\n\n      var text = div.innerText;\n\n      var test = document.createElement('div');\n      test.innerHTML = 'foo<br/>bar';\n\n      if (test.innerText.replace(/\\r\\n|\\r/g, '\\n') !== 'foo\\nbar') {\n        div.innerHTML = div.innerHTML.replace(/<br.*?[\\/]?>/gi, '\\n');\n        text = div.innerText;\n      }\n\n      return text;\n    }\n  }, {\n    key: 'onResize',\n    value: function onResize() {\n      this.calcTargetWidth();\n    }\n  }, {\n    key: 'onTruncate',\n    value: function onTruncate(didTruncate) {\n      var onTruncate = this.props.onTruncate;\n\n\n      if (typeof onTruncate === 'function') {\n        this.timeout = requestAnimationFrame(function () {\n          onTruncate(didTruncate);\n        });\n      }\n    }\n  }, {\n    key: 'calcTargetWidth',\n    value: function calcTargetWidth() {\n      var target = this.refs.target,\n          calcTargetWidth = this.calcTargetWidth,\n          canvas = this.canvas;\n\n      // Calculation is no longer relevant, since node has been removed\n\n      if (!target) {\n        return;\n      }\n\n      var targetWidth = this.props.options.fixedWidth || target.parentNode.getBoundingClientRect().width;\n\n      // Delay calculation until parent node is inserted to the document\n      // Mounting order in React is ChildComponent, ParentComponent\n      if (!targetWidth) {\n        return requestAnimationFrame(calcTargetWidth);\n      }\n\n      var style = window.getComputedStyle(target);\n\n      var font = [style['font-weight'], style['font-style'], style['font-size'], style['font-family']].join(' ');\n\n      canvas.font = font;\n\n      this.setState({\n        targetWidth: targetWidth\n      });\n    }\n  }, {\n    key: 'measureWidth',\n    value: function measureWidth(text) {\n      return this.canvas.measureText(text).width;\n    }\n  }, {\n    key: 'ellipsisWidth',\n    value: function ellipsisWidth(node) {\n      return node.offsetWidth;\n    }\n  }, {\n    key: 'getLines',\n    value: function getLines() {\n      var refs = this.refs,\n          _props = this.props,\n          numLines = _props.lines,\n          ellipsis = _props.ellipsis,\n          targetWidth = this.state.targetWidth,\n          innerText = this.innerText,\n          measureWidth = this.measureWidth,\n          onTruncate = this.onTruncate;\n\n\n      var lines = [];\n      var text = innerText(refs.text);\n      var textLines = text.split('\\n').map(function (line) {\n        return line.split(' ');\n      });\n      var didTruncate = true;\n      var ellipsisWidth = this.ellipsisWidth(this.refs.ellipsis);\n\n      for (var line = 1; line <= numLines; line++) {\n        var textWords = textLines[0];\n\n        // Handle newline\n        if (textWords.length === 0) {\n          lines.push();\n          textLines.shift();\n          line--;\n          continue;\n        }\n\n        var resultLine = textWords.join(' ');\n\n        if (measureWidth(resultLine) < targetWidth) {\n          if (textLines.length === 1) {\n            // Line is end of text and fits without truncating //\n            didTruncate = false;\n\n            lines.push(resultLine);\n            break;\n          }\n        }\n\n        if (line === numLines) {\n          // Binary search determining the longest possible line inluding truncate string //\n          var textRest = textWords.join(' ');\n\n          var lower = 0;\n          var upper = textRest.length - 1;\n\n          while (lower <= upper) {\n            var middle = Math.floor((lower + upper) / 2);\n\n            var testLine = textRest.slice(0, middle + 1);\n\n            if (measureWidth(testLine) + ellipsisWidth <= targetWidth) {\n              lower = middle + 1;\n            } else {\n              upper = middle - 1;\n            }\n          }\n\n          resultLine = _react2.default.createElement(\n            'span',\n            null,\n            textRest.slice(0, lower),\n            ellipsis\n          );\n        } else {\n          // Binary search determining when the line breaks //\n          var _lower = 0;\n          var _upper = textWords.length - 1;\n\n          while (_lower <= _upper) {\n            var _middle = Math.floor((_lower + _upper) / 2);\n\n            var _testLine = textWords.slice(0, _middle + 1).join(' ');\n\n            if (measureWidth(_testLine) <= targetWidth) {\n              _lower = _middle + 1;\n            } else {\n              _upper = _middle - 1;\n            }\n          }\n\n          // The first word of this line is too long to fit it\n          if (_lower === 0) {\n            // Jump to processing of last line\n            line = numLines - 1;\n            continue;\n          }\n\n          resultLine = textWords.slice(0, _lower).join(' ');\n          textLines[0].splice(0, _lower);\n        }\n\n        lines.push(resultLine);\n      }\n\n      onTruncate(didTruncate);\n\n      return lines;\n    }\n  }, {\n    key: 'renderLine',\n    value: function renderLine(line, i, arr) {\n      if (i === arr.length - 1) {\n        return _react2.default.createElement(\n          'span',\n          { key: i },\n          line\n        );\n      }\n      var br = _react2.default.createElement('br', { key: i + 'br' });\n\n      if (line) {\n        return [_react2.default.createElement(\n          'span',\n          { key: i },\n          line\n        ), br];\n      }\n\n      return br;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var target = this.refs.target,\n          _props2 = this.props,\n          children = _props2.children,\n          ellipsis = _props2.ellipsis,\n          lines = _props2.lines,\n          spanProps = _objectWithoutProperties(_props2, ['children', 'ellipsis', 'lines']),\n          targetWidth = this.state.targetWidth,\n          getLines = this.getLines,\n          renderLine = this.renderLine,\n          onTruncate = this.onTruncate;\n\n      var text = children;\n\n      if (typeof window !== 'undefined') {\n        if (target && targetWidth && lines > 0) {\n          text = getLines().map(renderLine);\n        } else {\n          onTruncate(false);\n        }\n      }\n\n      delete spanProps.onTruncate;\n      delete spanProps.options;\n\n      return _react2.default.createElement(\n        'span',\n        _extends({}, spanProps, { ref: 'target' }),\n        text,\n        _react2.default.createElement(\n          'span',\n          { ref: 'text' },\n          children\n        ),\n        _react2.default.createElement(\n          'span',\n          { ref: 'ellipsis', style: this.styles.ellipsis },\n          ellipsis\n        )\n      );\n    }\n  }]);\n\n  return Truncate;\n}(_react.Component);\n\nTruncate.propTypes = {\n  children: _react.PropTypes.node,\n  ellipsis: _react.PropTypes.node,\n  lines: _react.PropTypes.oneOfType([_react.PropTypes.oneOf([false]), _react.PropTypes.number]),\n  options: _react.PropTypes.object,\n  onTruncate: _react.PropTypes.func\n};\nTruncate.defaultProps = {\n  children: '',\n  ellipsis: '…',\n  options: {},\n  lines: 1\n};\nexports.default = Truncate;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}