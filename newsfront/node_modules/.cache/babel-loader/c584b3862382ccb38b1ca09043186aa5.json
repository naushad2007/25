{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\loren\\\\OneDrive\\\\\\u684C\\u9762\\\\hw8\\\\newsfront\\\\src\\\\components\\\\details\\\\Details.jsx\";\nimport React, { Component } from \"react\";\nimport { Consumer } from \"../../context\";\nimport axios from \"axios\";\nimport queryString from \"query-string\";\nimport Moment from \"react-moment\";\nimport { FacebookIcon, EmailShareButton, FacebookShareButton, TwitterShareButton, TwitterIcon, EmailIcon } from \"react-share\"; // import Bookmark from \"../Navbars/Bookmark\";\n\nimport ReadMore from \"@jamespotz/react-simple-readmore\";\nimport truncate from \"lodash/truncate\";\nimport Comment from \"./Comment\";\nimport { Spinner, Container } from \"react-bootstrap\";\nimport IsBookMarkDetail from \"./IsBookMarkDetail\";\nimport NotBookMarkDetail from \"./NotBookMarkDetai\";\nexport default class Details extends Component {\n  constructor(props) {\n    super(props);\n\n    this.AddToBookMark = () => {\n      localStorage.setItem(JSON.stringify(this.state.detailId), JSON.stringify(this.state.detailNews));\n    };\n\n    this.state = {\n      isBookMarked: false,\n      detailNews: {},\n      detailDescription: \"\",\n      detailId: \"\",\n      hidden: false\n    };\n  }\n\n  // 父组件是一个页面，子组件是这个页面里面的评论区。在父组件里面先获取这个页面的url的参数，然后用把这个参数传给子组件。\n  componentDidMount() {\n    const value = queryString.parse(this.props.location.search);\n    const id = value.id;\n    axios.get(`/article?id=${id}`).then(res => {\n      this.setState({\n        detailNews: res.data,\n        detailDescription: res.data.detailDescription,\n        detailId: res.data.detailId,\n        hidden: true\n      });\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    const {\n      detailId\n    } = this.state;\n\n    if (detailId.length != 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card m-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"card-title mt-2 ml-2 font-italic\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }\n      }, this.state.detailNews.detailTitle), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex bd-highlight mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Moment, {\n        className: \"font-italic\",\n        format: \"MM/DD/YYYY\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }\n      }, this.state.detailNews.detailDate), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ml-auto p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container px-lg-5 border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row mx-lg-n5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-3 border border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(FacebookShareButton, {\n        url: this.state.detailNews.detailUrl,\n        hashtag: \"#CSCI_571_NewsApp\",\n        className: \"button\",\n        \"data-toggle\": \"tooltip\",\n        \"data-placement\": \"top\",\n        title: \"Facebook\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(FacebookIcon, {\n        size: 32,\n        round: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }\n      })), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-3 border  border-0\",\n        \"data-toggle\": \"tooltip\",\n        \"data-placement\": \"top\",\n        title: \"Twitter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(TwitterShareButton, {\n        url: this.state.detailNews.detailUrl,\n        hashtags: [\"CSCI_571_NewsApp\"],\n        className: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(TwitterIcon, {\n        size: 32,\n        round: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }\n      })), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-3 border  border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(EmailShareButton, {\n        url: this.state.detailNews.detailUrl,\n        subject: \"#CSCI_571_NewsApp\",\n        body: \"\",\n        separator: \"\",\n        \"data-toggle\": \"tooltip\",\n        \"data-placement\": \"top\",\n        title: \"Email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(EmailIcon, {\n        size: 32,\n        round: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 25\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-5 border  border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        style: bookMarkButtonStyle,\n        onClick: this.AddToBookMark,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 23\n        }\n      }, localStorage.getItem(JSON.stringify(this.state.detailId)) === null ? /*#__PURE__*/React.createElement(NotBookMarkDetail, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 27\n        }\n      }) : /*#__PURE__*/React.createElement(IsBookMarkDetail, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 27\n        }\n      }))))))), /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.detailNews.detailImg,\n        className: \"card-img-top\",\n        alt: \"...\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(ReadMore, {\n        minHeight: 50,\n        defaultShownOnLess: /*#__PURE__*/React.createElement(\"p\", {\n          dangerouslySetInnerHTML: {\n            __html: truncate(`${this.state.detailDescription}`, {\n              length: 900\n            })\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 21\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        dangerouslySetInnerHTML: {\n          __html: `${this.state.detailDescription}`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 19\n        }\n      }))))), /*#__PURE__*/React.createElement(Comment, {\n        commentId: this.state.detailId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"spinner-border\",\n        role: \"status\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"sr-only\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }\n      }, \"Loading...\")));\n    }\n  }\n\n}\nconst bookMarkButtonStyle = {\n  background: \"none\",\n  border: \"none\"\n};","map":{"version":3,"sources":["C:/Users/loren/OneDrive/桌面/hw8/newsfront/src/components/details/Details.jsx"],"names":["React","Component","Consumer","axios","queryString","Moment","FacebookIcon","EmailShareButton","FacebookShareButton","TwitterShareButton","TwitterIcon","EmailIcon","ReadMore","truncate","Comment","Spinner","Container","IsBookMarkDetail","NotBookMarkDetail","Details","constructor","props","AddToBookMark","localStorage","setItem","JSON","stringify","state","detailId","detailNews","isBookMarked","detailDescription","hidden","componentDidMount","value","parse","location","search","id","get","then","res","setState","data","catch","err","console","log","render","length","detailTitle","detailDate","detailUrl","bookMarkButtonStyle","getItem","detailImg","__html","background","border"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Consumer } from \"../../context\";\r\nimport axios from \"axios\";\r\nimport queryString from \"query-string\";\r\nimport Moment from \"react-moment\";\r\nimport {\r\n  FacebookIcon,\r\n  EmailShareButton,\r\n  FacebookShareButton,\r\n  TwitterShareButton,\r\n  TwitterIcon,\r\n  EmailIcon,\r\n} from \"react-share\";\r\n// import Bookmark from \"../Navbars/Bookmark\";\r\nimport ReadMore from \"@jamespotz/react-simple-readmore\";\r\nimport truncate from \"lodash/truncate\";\r\nimport Comment from \"./Comment\";\r\nimport { Spinner, Container } from \"react-bootstrap\";\r\nimport IsBookMarkDetail from \"./IsBookMarkDetail\";\r\nimport NotBookMarkDetail from \"./NotBookMarkDetai\";\r\n\r\nexport default class Details extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isBookMarked: false,\r\n      detailNews: {},\r\n      detailDescription: \"\",\r\n      detailId: \"\",\r\n      hidden: false,\r\n    };\r\n  }\r\n\r\n  AddToBookMark = () => {\r\n    localStorage.setItem(\r\n      JSON.stringify(this.state.detailId),\r\n      JSON.stringify(this.state.detailNews)\r\n    );\r\n  };\r\n  // 父组件是一个页面，子组件是这个页面里面的评论区。在父组件里面先获取这个页面的url的参数，然后用把这个参数传给子组件。\r\n  componentDidMount() {\r\n    const value = queryString.parse(this.props.location.search);\r\n    const id = value.id;\r\n\r\n    axios\r\n      .get(`/article?id=${id}`)\r\n      .then((res) => {\r\n        this.setState({\r\n          detailNews: res.data,\r\n          detailDescription: res.data.detailDescription,\r\n          detailId: res.data.detailId,\r\n          hidden: true,\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  render() {\r\n    const { detailId } = this.state;\r\n    if (detailId.length != 0) {\r\n      return (\r\n        <div>\r\n          <div className=\"card m-3\">\r\n            <h4 className=\"card-title mt-2 ml-2 font-italic\">\r\n              {this.state.detailNews.detailTitle}\r\n            </h4>\r\n            <div className=\"d-flex bd-highlight mb-3\">\r\n              <div className=\"p-2 bd-highlight\">\r\n                <Moment className=\"font-italic\" format=\"MM/DD/YYYY\">\r\n                  {this.state.detailNews.detailDate}\r\n                </Moment>\r\n                <br />\r\n              </div>\r\n              <div className=\"ml-auto p-2 bd-highlight\">\r\n                {/* -------------------------------------share----------------------------------------- */}\r\n                <div className=\"container px-lg-5 border-0\">\r\n                  <div className=\"row mx-lg-n5\">\r\n                    <div className=\"col py-3 px-lg-3 border border-0\">\r\n                      <FacebookShareButton\r\n                        url={this.state.detailNews.detailUrl}\r\n                        hashtag=\"#CSCI_571_NewsApp\"\r\n                        className=\"button\"\r\n                        data-toggle=\"tooltip\"\r\n                        data-placement=\"top\"\r\n                        title=\"Facebook\"\r\n                      >\r\n                        <FacebookIcon size={32} round={true} />\r\n                      </FacebookShareButton>{\" \"}\r\n                    </div>\r\n                    <div\r\n                      className=\"col py-3 px-lg-3 border  border-0\"\r\n                      data-toggle=\"tooltip\"\r\n                      data-placement=\"top\"\r\n                      title=\"Twitter\"\r\n                    >\r\n                      <TwitterShareButton\r\n                        url={this.state.detailNews.detailUrl}\r\n                        hashtags={[\"CSCI_571_NewsApp\"]}\r\n                        className=\"button\"\r\n                      >\r\n                        <TwitterIcon size={32} round={true} />\r\n                      </TwitterShareButton>{\" \"}\r\n                    </div>\r\n                    <div className=\"col py-3 px-lg-3 border  border-0\">\r\n                      <EmailShareButton\r\n                        url={this.state.detailNews.detailUrl}\r\n                        subject=\"#CSCI_571_NewsApp\"\r\n                        body=\"\"\r\n                        separator=\"\"\r\n                        data-toggle=\"tooltip\"\r\n                        data-placement=\"top\"\r\n                        title=\"Email\"\r\n                      >\r\n                        <EmailIcon size={32} round={true} />\r\n                      </EmailShareButton>\r\n                    </div>\r\n                    <div className=\"col py-3 px-lg-5 border  border-0\">\r\n                      <button\r\n                        style={bookMarkButtonStyle}\r\n                        onClick={this.AddToBookMark}\r\n                      >\r\n                        {localStorage.getItem(\r\n                          JSON.stringify(this.state.detailId)\r\n                        ) === null ? (\r\n                          <NotBookMarkDetail />\r\n                        ) : (\r\n                          <IsBookMarkDetail />\r\n                        )}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <img\r\n              src={this.state.detailNews.detailImg}\r\n              className=\"card-img-top\"\r\n              alt=\"...\"\r\n            />\r\n            <div className=\"card-body\">\r\n              {/* https://www.npmjs.com/package/@jamespotz/react-simple-readmore */}\r\n              <div>\r\n                <ReadMore\r\n                  minHeight={50}\r\n                  defaultShownOnLess={\r\n                    <p\r\n                      dangerouslySetInnerHTML={{\r\n                        __html: truncate(`${this.state.detailDescription}`, {\r\n                          length: 900,\r\n                        }),\r\n                      }}\r\n                    />\r\n                  }\r\n                >\r\n                  <p\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: `${this.state.detailDescription}`,\r\n                    }}\r\n                  />\r\n                </ReadMore>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <Comment commentId={this.state.detailId} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className=\"text-center\">\r\n          <div className=\"spinner-border\" role=\"status\">\r\n            <span className=\"sr-only\">Loading...</span>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst bookMarkButtonStyle = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n};\r\n"]},"metadata":{},"sourceType":"module"}