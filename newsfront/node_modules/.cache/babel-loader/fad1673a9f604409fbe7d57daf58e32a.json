{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\loren\\\\OneDrive\\\\\\u684C\\u9762\\\\hw8\\\\newsfront\\\\src\\\\components\\\\Navbars\\\\SearchSelect.jsx\";\nimport React from \"react\";\nimport Select from \"react-select\";\nconst options = [{\n  value: \"chocolate\",\n  label: \"Chocolate\"\n}, {\n  value: \"strawberry\",\n  label: \"Strawberry\"\n}, {\n  value: \"vanilla\",\n  label: \"Vanilla\"\n}];\n\nclass SearchSelect extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedOption: null\n    };\n\n    this.handleChange = selectedOption => {\n      this.setState({\n        selectedOption\n      }, () => console.log(`Option selected:`, this.state.selectedOption));\n    };\n  }\n\n  componentDidMount() {\n    getSubscriptionKey();\n\n    getSubscriptionKey = function () {\n      var COOKIE = \"fd0ef54849aa44c890942a2eb8866194\"; // name used to store API key in key/value storage\n\n      function findCookie(name) {\n        var cookies = document.cookie.split(\";\");\n\n        for (var i = 0; i < cookies.length; i++) {\n          var keyvalue = cookies[i].split(\"=\");\n\n          if (keyvalue[0].trim() === name) {\n            return keyvalue[1];\n          }\n        }\n\n        return \"\";\n      }\n\n      function getSubscriptionKeyCookie() {\n        var key = findCookie(COOKIE);\n\n        while (key.length !== 32) {\n          key = prompt(\"Enter Bing Autosuggest API subscription key:\", \"\").trim();\n          var expiry = new Date();\n          expiry.setFullYear(expiry.getFullYear() + 2);\n          document.cookie = COOKIE + \"=\" + key.trim() + \"; expires=\" + expiry.toUTCString();\n        }\n\n        return key;\n      }\n\n      function getSubscriptionKeyLocalStorage() {\n        var key = localStorage.getItem(COOKIE) || \"\";\n\n        while (key.length !== 32) key = prompt(\"Enter Bing Autosuggest API subscription key:\", \"\").trim();\n\n        localStorage.setItem(COOKIE, key);\n        return key;\n      }\n\n      function getSubscriptionKey(invalidate) {\n        if (invalidate) {\n          try {\n            localStorage.removeItem(COOKIE);\n          } catch (e) {\n            document.cookie = COOKIE + \"=\";\n          }\n        } else {\n          try {\n            return getSubscriptionKeyLocalStorage();\n          } catch (e) {\n            return getSubscriptionKeyCookie();\n          }\n        }\n      }\n\n      return getSubscriptionKey;\n    }(); //-----------------------------------\n\n\n    function pre(text) {\n      return \"<pre>\" + text.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"</pre>\";\n    }\n\n    function renderSearchResults(results) {\n      document.getElementById(\"results\").innerHTML = pre(JSON.stringify(results, null, 2));\n    }\n\n    function renderErrorMessage(message, code) {\n      if (code) document.getElementById(\"results\").innerHTML = \"<pre>Status \" + code + \": \" + message + \"</pre>\";else document.getElementById(\"results\").innerHTML = \"<pre>\" + message + \"</pre>\";\n    }\n\n    function bingAutosuggest(query, key) {\n      var endpoint = \"https://api.cognitive.microsoft.com/bing/v7.0/Suggestions\";\n      var request = new XMLHttpRequest();\n\n      try {\n        request.open(\"GET\", endpoint + \"?q=\" + encodeURIComponent(query));\n      } catch (e) {\n        renderErrorMessage(\"Bad request\");\n        return false;\n      }\n\n      request.setRequestHeader(\"Ocp-Apim-Subscription-Key\", key);\n      request.addEventListener(\"load\", function () {\n        if (this.status === 200) {\n          renderSearchResults(JSON.parse(this.responseText));\n        } else {\n          if (this.status === 401) getSubscriptionKey(true);\n          renderErrorMessage(this.statusText, this.status);\n        }\n      });\n      request.addEventListener(\"error\", function () {\n        renderErrorMessage(\"Network error\");\n      });\n      request.addEventListener(\"abort\", function () {\n        renderErrorMessage(\"Request aborted\");\n      });\n      request.send();\n      return false;\n    }\n  }\n\n  render() {\n    const {\n      selectedOption\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: searchStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Select, {\n      value: selectedOption,\n      onChange: this.handleChange,\n      options: options,\n      placeholder: \"Enter keywords..\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default SearchSelect;\nconst searchStyle = {\n  width: \"200px\"\n};","map":{"version":3,"sources":["C:/Users/loren/OneDrive/桌面/hw8/newsfront/src/components/Navbars/SearchSelect.jsx"],"names":["React","Select","options","value","label","SearchSelect","Component","state","selectedOption","handleChange","setState","console","log","componentDidMount","getSubscriptionKey","COOKIE","findCookie","name","cookies","document","cookie","split","i","length","keyvalue","trim","getSubscriptionKeyCookie","key","prompt","expiry","Date","setFullYear","getFullYear","toUTCString","getSubscriptionKeyLocalStorage","localStorage","getItem","setItem","invalidate","removeItem","e","pre","text","replace","renderSearchResults","results","getElementById","innerHTML","JSON","stringify","renderErrorMessage","message","code","bingAutosuggest","query","endpoint","request","XMLHttpRequest","open","encodeURIComponent","setRequestHeader","addEventListener","status","parse","responseText","statusText","send","render","searchStyle","width"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Select from \"react-select\";\r\n\r\nconst options = [\r\n  { value: \"chocolate\", label: \"Chocolate\" },\r\n  { value: \"strawberry\", label: \"Strawberry\" },\r\n  { value: \"vanilla\", label: \"Vanilla\" },\r\n];\r\n\r\nclass SearchSelect extends React.Component {\r\n  state = {\r\n    selectedOption: null,\r\n  };\r\n  componentDidMount() {\r\n    getSubscriptionKey();\r\n    getSubscriptionKey = (function () {\r\n      var COOKIE = \"fd0ef54849aa44c890942a2eb8866194\"; // name used to store API key in key/value storage\r\n      function findCookie(name) {\r\n        var cookies = document.cookie.split(\";\");\r\n        for (var i = 0; i < cookies.length; i++) {\r\n          var keyvalue = cookies[i].split(\"=\");\r\n          if (keyvalue[0].trim() === name) {\r\n            return keyvalue[1];\r\n          }\r\n        }\r\n        return \"\";\r\n      }\r\n      function getSubscriptionKeyCookie() {\r\n        var key = findCookie(COOKIE);\r\n        while (key.length !== 32) {\r\n          key = prompt(\r\n            \"Enter Bing Autosuggest API subscription key:\",\r\n            \"\"\r\n          ).trim();\r\n          var expiry = new Date();\r\n          expiry.setFullYear(expiry.getFullYear() + 2);\r\n          document.cookie =\r\n            COOKIE + \"=\" + key.trim() + \"; expires=\" + expiry.toUTCString();\r\n        }\r\n        return key;\r\n      }\r\n      function getSubscriptionKeyLocalStorage() {\r\n        var key = localStorage.getItem(COOKIE) || \"\";\r\n        while (key.length !== 32)\r\n          key = prompt(\r\n            \"Enter Bing Autosuggest API subscription key:\",\r\n            \"\"\r\n          ).trim();\r\n        localStorage.setItem(COOKIE, key);\r\n        return key;\r\n      }\r\n      function getSubscriptionKey(invalidate) {\r\n        if (invalidate) {\r\n          try {\r\n            localStorage.removeItem(COOKIE);\r\n          } catch (e) {\r\n            document.cookie = COOKIE + \"=\";\r\n          }\r\n        } else {\r\n          try {\r\n            return getSubscriptionKeyLocalStorage();\r\n          } catch (e) {\r\n            return getSubscriptionKeyCookie();\r\n          }\r\n        }\r\n      }\r\n      return getSubscriptionKey;\r\n    })();\r\n    //-----------------------------------\r\n    function pre(text) {\r\n      return (\r\n        \"<pre>\" + text.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"</pre>\"\r\n      );\r\n    }\r\n    function renderSearchResults(results) {\r\n      document.getElementById(\"results\").innerHTML = pre(\r\n        JSON.stringify(results, null, 2)\r\n      );\r\n    }\r\n    function renderErrorMessage(message, code) {\r\n      if (code)\r\n        document.getElementById(\"results\").innerHTML =\r\n          \"<pre>Status \" + code + \": \" + message + \"</pre>\";\r\n      else\r\n        document.getElementById(\"results\").innerHTML =\r\n          \"<pre>\" + message + \"</pre>\";\r\n    }\r\n    function bingAutosuggest(query, key) {\r\n      var endpoint =\r\n        \"https://api.cognitive.microsoft.com/bing/v7.0/Suggestions\";\r\n\r\n      var request = new XMLHttpRequest();\r\n\r\n      try {\r\n        request.open(\"GET\", endpoint + \"?q=\" + encodeURIComponent(query));\r\n      } catch (e) {\r\n        renderErrorMessage(\"Bad request\");\r\n        return false;\r\n      }\r\n      request.setRequestHeader(\"Ocp-Apim-Subscription-Key\", key);\r\n      request.addEventListener(\"load\", function () {\r\n        if (this.status === 200) {\r\n          renderSearchResults(JSON.parse(this.responseText));\r\n        } else {\r\n          if (this.status === 401) getSubscriptionKey(true);\r\n          renderErrorMessage(this.statusText, this.status);\r\n        }\r\n      });\r\n      request.addEventListener(\"error\", function () {\r\n        renderErrorMessage(\"Network error\");\r\n      });\r\n\r\n      request.addEventListener(\"abort\", function () {\r\n        renderErrorMessage(\"Request aborted\");\r\n      });\r\n      request.send();\r\n      return false;\r\n    }\r\n  }\r\n\r\n  handleChange = (selectedOption) => {\r\n    this.setState({ selectedOption }, () =>\r\n      console.log(`Option selected:`, this.state.selectedOption)\r\n    );\r\n  };\r\n  render() {\r\n    const { selectedOption } = this.state;\r\n\r\n    return (\r\n      <div style={searchStyle}>\r\n        <Select\r\n          value={selectedOption}\r\n          onChange={this.handleChange}\r\n          options={options}\r\n          placeholder=\"Enter keywords..\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchSelect;\r\n\r\nconst searchStyle = {\r\n  width: \"200px\",\r\n};\r\n"]},"metadata":{},"sourceType":"module"}