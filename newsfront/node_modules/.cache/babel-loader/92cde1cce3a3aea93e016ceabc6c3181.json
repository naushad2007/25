{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\loren\\\\OneDrive\\\\\\u684C\\u9762\\\\hw8\\\\newsfront\\\\src\\\\components\\\\details\\\\Details.jsx\";\nimport React, { Component } from \"react\";\nimport { Consumer } from \"../../context\";\nimport axios from \"axios\";\nimport queryString from \"query-string\";\nimport Moment from \"react-moment\";\nimport { FacebookIcon, EmailShareButton, FacebookShareButton, TwitterShareButton, TwitterIcon, EmailIcon } from \"react-share\"; // import Bookmark from \"../Navbars/Bookmark\";\n\nimport ReadMore from \"@jamespotz/react-simple-readmore\";\nimport truncate from \"lodash/truncate\";\nimport Comment from \"./Comment\"; // import { Spinner, Container } from \"react-bootstrap\";\n\nimport IsBookMarkDetail from \"./IsBookMarkDetail\";\nimport NotBookMarkDetail from \"./NotBookMarkDetai\";\nimport ReactTooltip from \"react-tooltip\";\nimport { ToastContainer, toast, Zoom } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Spinner from \"../News/Spinner\";\nexport default class Details extends Component {\n  constructor(props) {\n    super(props);\n\n    this.AddToBookMark = () => {\n      if (localStorage.getItem(JSON.stringify(this.state.detailId)) === null) {\n        localStorage.setItem(JSON.stringify(this.state.detailId), JSON.stringify(this.state.detailNews));\n        this.setState({\n          isBookMarked: true\n        });\n        toast(`Saving ${this.state.detailNews.detailTitle}`, {\n          position: \"top-center\",\n          autoClose: 2000,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      } else {\n        localStorage.removeItem(JSON.stringify(this.state.detailId));\n        this.setState({\n          isBookMarked: false\n        });\n        toast(`Removing - ${this.state.detailNews.detailTitle}`, {\n          position: \"top-center\",\n          autoClose: 2000,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      } // localStorage.getItem(JSON.stringify(this.state.detailId)) === null\n      //   ? this.setState({\n      //       isBookMarked: false,\n      //     })\n      //   : this.setState({\n      //       isBookMarked: true,\n      //     });\n\n    };\n\n    this.state = {\n      isBookMarked: false,\n      detailNews: {},\n      detailDescription: \"\",\n      detailId: \"\",\n      hidden: false\n    };\n  }\n\n  // toastAdd = () =>\n  //   toast(\"🦄 Wow so easy!\", {\n  //     position: \"top-center\",\n  //     autoClose: 5000,\n  //     hideProgressBar: true,\n  //     closeOnClick: true,\n  //     pauseOnHover: true,\n  //     draggable: true,\n  //   });\n  // 父组件是一个页面，子组件是这个页面里面的评论区。在父组件里面先获取这个页面的url的参数，然后用把这个参数传给子组件。\n  componentDidMount() {\n    // const value = queryString.parse(this.props.location.search);\n    // const id = value.id;\n    const param = window.location.search.slice(4, 9);\n\n    if (param === \"https\") {\n      localStorage.setItem(\"guardianChecked\", false);\n    } else {\n      localStorage.setItem(\"guardianChecked\", true);\n    }\n\n    console.log(param);\n\n    if (localStorage.getItem(\"guardianChecked\") === \"true\") {\n      const value = queryString.parse(this.props.location.search);\n      const id = value.id;\n      axios.get(`/article?id=${id}`, {\n        headers: {\n          guardianChecked: 1\n        }\n      }).then(res => {\n        this.setState({\n          detailNews: res.data,\n          detailDescription: res.data.detailDescription,\n          detailId: res.data.detailId,\n          hidden: true\n        });\n      }).catch(err => console.log(err));\n    } else {\n      const value = queryString.parse(this.props.location.search);\n      const id = value.id;\n      axios.get(`/article?id=${id}`, {\n        headers: {\n          guardianChecked: 2\n        }\n      }).then(res => {\n        this.setState({\n          detailNews: res.data,\n          detailDescription: res.data.detailDescription,\n          detailId: res.data.detailId,\n          hidden: true\n        });\n      }).catch(err => console.log(err));\n    }\n  }\n\n  render() {\n    const {\n      detailId\n    } = this.state;\n\n    if (detailId.length != 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card m-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"card-title mt-2 ml-2 font-italic\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }\n      }, this.state.detailNews.detailTitle), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex bd-highlight mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Moment, {\n        className: \"font-italic\",\n        format: \"MM/DD/YYYY\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }\n      }, this.state.detailNews.detailDate), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ml-auto p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container px-lg-5 border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row mx-lg-n5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-3 border border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        \"data-tip\": \"Facebook\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(ReactTooltip, {\n        effect: \"solid\",\n        style: extraClass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(FacebookShareButton, {\n        url: this.state.detailNews.detailUrl,\n        hashtag: \"#CSCI_571_NewsApp\",\n        className: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(FacebookIcon, {\n        size: 32,\n        round: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 27\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-3 border  border-0\" // data-toggle=\"tooltip\"\n        // data-placement=\"top\"\n        // title=\"Twitter\"\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        \"data-tip\": \"Twitter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(ReactTooltip, {\n        effect: \"solid\",\n        style: extraClass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(TwitterShareButton, {\n        url: this.state.detailNews.detailUrl,\n        hashtags: [\"CSCI_571_NewsApp\"],\n        className: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(TwitterIcon, {\n        size: 32,\n        round: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 27\n        }\n      })), \" \")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-3 border  border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        \"data-tip\": \"Email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(ReactTooltip, {\n        effect: \"solid\",\n        style: extraClass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(EmailShareButton, {\n        url: this.state.detailNews.detailUrl,\n        subject: \"#CSCI_571_NewsApp\",\n        body: \"\",\n        separator: \"\",\n        \"data-toggle\": \"tooltip\",\n        \"data-placement\": \"top\",\n        title: \"Email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(EmailIcon, {\n        size: 32,\n        round: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 27\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-5 border  border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        \"data-tip\": \"Bookmark\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(ReactTooltip, {\n        effect: \"solid\",\n        style: extraClass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        style: bookMarkButtonStyle,\n        onClick: this.AddToBookMark,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 25\n        }\n      }, localStorage.getItem(JSON.stringify(this.state.detailId)) === null ? /*#__PURE__*/React.createElement(NotBookMarkDetail, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 29\n        }\n      }) : /*#__PURE__*/React.createElement(IsBookMarkDetail, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(ToastContainer, {\n        transition: Zoom,\n        position: \"top-center\",\n        autoClose: 500,\n        hideProgressBar: true,\n        newestOnTop: false,\n        closeOnClick: true,\n        rtl: false,\n        pauseOnVisibilityChange: true,\n        draggable: true,\n        pauseOnHover: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 25\n        }\n      }))))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" ml-3 mr-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.detailNews.detailImg,\n        className: \"card-img-top rounded \",\n        alt: \"...\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(ReadMore, {\n        btnStyles: {\n          border: \"none\",\n          background: \"#ffffff\",\n          float: \"right\"\n        },\n        minHeight: 50,\n        defaultShownOnLess: /*#__PURE__*/React.createElement(\"p\", {\n          dangerouslySetInnerHTML: {\n            __html: truncate(`${this.state.detailDescription}`, {\n              length: 900\n            })\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 21\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        dangerouslySetInnerHTML: {\n          __html: `${this.state.detailDescription}`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 19\n        }\n      }))))), /*#__PURE__*/React.createElement(Comment, {\n        commentId: this.state.detailId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 14\n        }\n      });\n    }\n  }\n\n}\nconst bookMarkButtonStyle = {\n  background: \"none\",\n  border: \"none\"\n};\nconst extraClass = {\n  font: \"20px !important\"\n};","map":{"version":3,"sources":["C:/Users/loren/OneDrive/桌面/hw8/newsfront/src/components/details/Details.jsx"],"names":["React","Component","Consumer","axios","queryString","Moment","FacebookIcon","EmailShareButton","FacebookShareButton","TwitterShareButton","TwitterIcon","EmailIcon","ReadMore","truncate","Comment","IsBookMarkDetail","NotBookMarkDetail","ReactTooltip","ToastContainer","toast","Zoom","Spinner","Details","constructor","props","AddToBookMark","localStorage","getItem","JSON","stringify","state","detailId","setItem","detailNews","setState","isBookMarked","detailTitle","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","removeItem","detailDescription","hidden","componentDidMount","param","window","location","search","slice","console","log","value","parse","id","get","headers","guardianChecked","then","res","data","catch","err","render","length","detailDate","extraClass","detailUrl","bookMarkButtonStyle","detailImg","border","background","float","__html","font"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Consumer } from \"../../context\";\r\nimport axios from \"axios\";\r\nimport queryString from \"query-string\";\r\nimport Moment from \"react-moment\";\r\nimport {\r\n  FacebookIcon,\r\n  EmailShareButton,\r\n  FacebookShareButton,\r\n  TwitterShareButton,\r\n  TwitterIcon,\r\n  EmailIcon,\r\n} from \"react-share\";\r\n// import Bookmark from \"../Navbars/Bookmark\";\r\nimport ReadMore from \"@jamespotz/react-simple-readmore\";\r\nimport truncate from \"lodash/truncate\";\r\nimport Comment from \"./Comment\";\r\n// import { Spinner, Container } from \"react-bootstrap\";\r\nimport IsBookMarkDetail from \"./IsBookMarkDetail\";\r\nimport NotBookMarkDetail from \"./NotBookMarkDetai\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport { ToastContainer, toast, Zoom } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Spinner from \"../News/Spinner\";\r\n\r\nexport default class Details extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isBookMarked: false,\r\n      detailNews: {},\r\n      detailDescription: \"\",\r\n      detailId: \"\",\r\n      hidden: false,\r\n    };\r\n  }\r\n\r\n  AddToBookMark = () => {\r\n    if (localStorage.getItem(JSON.stringify(this.state.detailId)) === null) {\r\n      localStorage.setItem(\r\n        JSON.stringify(this.state.detailId),\r\n        JSON.stringify(this.state.detailNews)\r\n      );\r\n      this.setState({\r\n        isBookMarked: true,\r\n      });\r\n      toast(`Saving ${this.state.detailNews.detailTitle}`, {\r\n        position: \"top-center\",\r\n        autoClose: 2000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n      });\r\n    } else {\r\n      localStorage.removeItem(JSON.stringify(this.state.detailId));\r\n      this.setState({\r\n        isBookMarked: false,\r\n      });\r\n      toast(`Removing - ${this.state.detailNews.detailTitle}`, {\r\n        position: \"top-center\",\r\n        autoClose: 2000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n      });\r\n    }\r\n\r\n    // localStorage.getItem(JSON.stringify(this.state.detailId)) === null\r\n    //   ? this.setState({\r\n    //       isBookMarked: false,\r\n    //     })\r\n    //   : this.setState({\r\n    //       isBookMarked: true,\r\n    //     });\r\n  };\r\n  // toastAdd = () =>\r\n  //   toast(\"🦄 Wow so easy!\", {\r\n  //     position: \"top-center\",\r\n  //     autoClose: 5000,\r\n  //     hideProgressBar: true,\r\n  //     closeOnClick: true,\r\n  //     pauseOnHover: true,\r\n  //     draggable: true,\r\n  //   });\r\n  // 父组件是一个页面，子组件是这个页面里面的评论区。在父组件里面先获取这个页面的url的参数，然后用把这个参数传给子组件。\r\n  componentDidMount() {\r\n    // const value = queryString.parse(this.props.location.search);\r\n    // const id = value.id;\r\n    const param = window.location.search.slice(4, 9);\r\n    if (param === \"https\") {\r\n      localStorage.setItem(\"guardianChecked\", false);\r\n    } else {\r\n      localStorage.setItem(\"guardianChecked\", true);\r\n    }\r\n    console.log(param);\r\n    if (localStorage.getItem(\"guardianChecked\") === \"true\") {\r\n      const value = queryString.parse(this.props.location.search);\r\n      const id = value.id;\r\n      axios\r\n        .get(`/article?id=${id}`, {\r\n          headers: {\r\n            guardianChecked: 1,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          this.setState({\r\n            detailNews: res.data,\r\n            detailDescription: res.data.detailDescription,\r\n            detailId: res.data.detailId,\r\n            hidden: true,\r\n          });\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      const value = queryString.parse(this.props.location.search);\r\n      const id = value.id;\r\n      axios\r\n        .get(`/article?id=${id}`, {\r\n          headers: {\r\n            guardianChecked: 2,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          this.setState({\r\n            detailNews: res.data,\r\n            detailDescription: res.data.detailDescription,\r\n            detailId: res.data.detailId,\r\n            hidden: true,\r\n          });\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { detailId } = this.state;\r\n    if (detailId.length != 0) {\r\n      return (\r\n        <div>\r\n          <div className=\"card m-3\">\r\n            <h4 className=\"card-title mt-2 ml-2 font-italic\">\r\n              {this.state.detailNews.detailTitle}\r\n            </h4>\r\n            <div className=\"d-flex bd-highlight mb-3\">\r\n              <div className=\"p-2 bd-highlight\">\r\n                <Moment className=\"font-italic\" format=\"MM/DD/YYYY\">\r\n                  {this.state.detailNews.detailDate}\r\n                </Moment>\r\n                <br />\r\n              </div>\r\n              <div className=\"ml-auto p-2 bd-highlight\">\r\n                {/* -------------------------------------share----------------------------------------- */}\r\n                <div className=\"container px-lg-5 border-0\">\r\n                  <div className=\"row mx-lg-n5\">\r\n                    <div className=\"col py-3 px-lg-3 border border-0\">\r\n                      <a data-tip=\"Facebook\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <FacebookShareButton\r\n                          url={this.state.detailNews.detailUrl}\r\n                          hashtag=\"#CSCI_571_NewsApp\"\r\n                          className=\"button\"\r\n                        >\r\n                          <FacebookIcon size={32} round={true} />\r\n                        </FacebookShareButton>\r\n                      </a>\r\n                    </div>\r\n                    <div\r\n                      className=\"col py-3 px-lg-3 border  border-0\"\r\n                      // data-toggle=\"tooltip\"\r\n                      // data-placement=\"top\"\r\n                      // title=\"Twitter\"\r\n                    >\r\n                      <a data-tip=\"Twitter\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <TwitterShareButton\r\n                          url={this.state.detailNews.detailUrl}\r\n                          hashtags={[\"CSCI_571_NewsApp\"]}\r\n                          className=\"button\"\r\n                        >\r\n                          <TwitterIcon size={32} round={true} />\r\n                        </TwitterShareButton>{\" \"}\r\n                      </a>\r\n                    </div>\r\n                    <div className=\"col py-3 px-lg-3 border  border-0\">\r\n                      <a data-tip=\"Email\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <EmailShareButton\r\n                          url={this.state.detailNews.detailUrl}\r\n                          subject=\"#CSCI_571_NewsApp\"\r\n                          body=\"\"\r\n                          separator=\"\"\r\n                          data-toggle=\"tooltip\"\r\n                          data-placement=\"top\"\r\n                          title=\"Email\"\r\n                        >\r\n                          <EmailIcon size={32} round={true} />\r\n                        </EmailShareButton>\r\n                      </a>\r\n                    </div>\r\n                    <div className=\"col py-3 px-lg-5 border  border-0\">\r\n                      <a data-tip=\"Bookmark\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <button\r\n                          style={bookMarkButtonStyle}\r\n                          onClick={this.AddToBookMark}\r\n                        >\r\n                          {localStorage.getItem(\r\n                            JSON.stringify(this.state.detailId)\r\n                          ) === null ? (\r\n                            <NotBookMarkDetail />\r\n                          ) : (\r\n                            <IsBookMarkDetail />\r\n                          )}\r\n                        </button>\r\n                        <ToastContainer\r\n                          transition={Zoom}\r\n                          position=\"top-center\"\r\n                          autoClose={500}\r\n                          hideProgressBar\r\n                          newestOnTop={false}\r\n                          closeOnClick\r\n                          rtl={false}\r\n                          pauseOnVisibilityChange\r\n                          draggable\r\n                          pauseOnHover\r\n                        />\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\" ml-3 mr-3\">\r\n              <img\r\n                src={this.state.detailNews.detailImg}\r\n                className=\"card-img-top rounded \"\r\n                alt=\"...\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"card-body\">\r\n              {/* https://www.npmjs.com/package/@jamespotz/react-simple-readmore */}\r\n              <div>\r\n                <ReadMore\r\n                  btnStyles={{\r\n                    border: \"none\",\r\n                    background: \"#ffffff\",\r\n                    float: \"right\",\r\n                  }}\r\n                  minHeight={50}\r\n                  defaultShownOnLess={\r\n                    <p\r\n                      dangerouslySetInnerHTML={{\r\n                        __html: truncate(`${this.state.detailDescription}`, {\r\n                          length: 900,\r\n                        }),\r\n                      }}\r\n                    />\r\n                  }\r\n                >\r\n                  <p\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: `${this.state.detailDescription}`,\r\n                    }}\r\n                  />\r\n                </ReadMore>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <Comment commentId={this.state.detailId} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return <Spinner />;\r\n    }\r\n  }\r\n}\r\n\r\nconst bookMarkButtonStyle = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n};\r\n\r\nconst extraClass = {\r\n  font: \"20px !important\",\r\n};\r\n"]},"metadata":{},"sourceType":"module"}