{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\loren\\\\OneDrive\\\\\\u684C\\u9762\\\\hw8\\\\newsfront\\\\src\\\\components\\\\details\\\\Details.jsx\";\nimport React, { Component } from \"react\";\nimport { Consumer } from \"../../context\";\nimport axios from \"axios\";\nimport queryString from \"query-string\";\nimport Moment from \"react-moment\";\nimport { FacebookIcon, EmailShareButton, FacebookShareButton, TwitterShareButton, TwitterIcon, EmailIcon } from \"react-share\"; // import Bookmark from \"../Navbars/Bookmark\";\n\nimport ReadMore from \"@jamespotz/react-simple-readmore\";\nimport truncate from \"lodash/truncate\";\nimport Comment from \"./Comment\";\nimport { Spinner, Container } from \"react-bootstrap\";\nimport IsBookMarkDetail from \"./IsBookMarkDetail\";\nimport NotBookMarkDetail from \"./NotBookMarkDetai\";\nimport ReactTooltip from \"react-tooltip\";\nimport { ToastContainer, toast, Zoom } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nexport default class Details extends Component {\n  constructor(props) {\n    super(props);\n\n    this.AddToBookMark = () => {\n      if (localStorage.getItem(JSON.stringify(this.state.detailId)) === null) {\n        localStorage.setItem(JSON.stringify(this.state.detailId), JSON.stringify(this.state.detailNews));\n        this.setState({\n          isBookMarked: true\n        });\n        toast(`Saving ${this.state.detailNews.detailTitle}`, {\n          position: \"top-center\",\n          autoClose: 3000,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      } else {\n        localStorage.removeItem(JSON.stringify(this.state.detailId));\n        this.setState({\n          isBookMarked: false\n        });\n        toast(`Removing - ${this.state.detailNews.detailTitle}`, {\n          position: \"top-center\",\n          autoClose: 3000,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      } // localStorage.getItem(JSON.stringify(this.state.detailId)) === null\n      //   ? this.setState({\n      //       isBookMarked: false,\n      //     })\n      //   : this.setState({\n      //       isBookMarked: true,\n      //     });\n\n    };\n\n    this.state = {\n      isBookMarked: false,\n      detailNews: {},\n      detailDescription: \"\",\n      detailId: \"\",\n      hidden: false\n    };\n  }\n\n  // toastAdd = () =>\n  //   toast(\"🦄 Wow so easy!\", {\n  //     position: \"top-center\",\n  //     autoClose: 5000,\n  //     hideProgressBar: true,\n  //     closeOnClick: true,\n  //     pauseOnHover: true,\n  //     draggable: true,\n  //   });\n  // 父组件是一个页面，子组件是这个页面里面的评论区。在父组件里面先获取这个页面的url的参数，然后用把这个参数传给子组件。\n  componentDidMount() {\n    const value = queryString.parse(this.props.location.search);\n    const id = value.id;\n    axios.get(`/article?id=${id}`).then(res => {\n      this.setState({\n        detailNews: res.data,\n        detailDescription: res.data.detailDescription,\n        detailId: res.data.detailId,\n        hidden: true\n      });\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    const {\n      detailId\n    } = this.state;\n\n    if (detailId.length != 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card m-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"card-title mt-2 ml-2 font-italic\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }\n      }, this.state.detailNews.detailTitle), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex bd-highlight mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Moment, {\n        className: \"font-italic\",\n        format: \"MM/DD/YYYY\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }\n      }, this.state.detailNews.detailDate), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ml-auto p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container px-lg-5 border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row mx-lg-n5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-3 border border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        \"data-tip\": \"Facebook\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(ReactTooltip, {\n        effect: \"solid\",\n        style: extraClass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(FacebookShareButton, {\n        url: this.state.detailNews.detailUrl,\n        hashtag: \"#CSCI_571_NewsApp\",\n        className: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(FacebookIcon, {\n        size: 32,\n        round: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 27\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-3 border  border-0\" // data-toggle=\"tooltip\"\n        // data-placement=\"top\"\n        // title=\"Twitter\"\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        \"data-tip\": \"Twitter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(ReactTooltip, {\n        effect: \"solid\",\n        style: extraClass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(TwitterShareButton, {\n        url: this.state.detailNews.detailUrl,\n        hashtags: [\"CSCI_571_NewsApp\"],\n        className: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(TwitterIcon, {\n        size: 32,\n        round: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 27\n        }\n      })), \" \")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-3 border  border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        \"data-tip\": \"Email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(ReactTooltip, {\n        effect: \"solid\",\n        style: extraClass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(EmailShareButton, {\n        url: this.state.detailNews.detailUrl,\n        subject: \"#CSCI_571_NewsApp\",\n        body: \"\",\n        separator: \"\",\n        \"data-toggle\": \"tooltip\",\n        \"data-placement\": \"top\",\n        title: \"Email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(EmailIcon, {\n        size: 32,\n        round: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 27\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col py-3 px-lg-5 border  border-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        \"data-tip\": \"Bookmark\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(ReactTooltip, {\n        effect: \"solid\",\n        style: extraClass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        style: bookMarkButtonStyle,\n        onClick: this.AddToBookMark,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }\n      }, localStorage.getItem(JSON.stringify(this.state.detailId)) === null ? /*#__PURE__*/React.createElement(NotBookMarkDetail, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 29\n        }\n      }) : /*#__PURE__*/React.createElement(IsBookMarkDetail, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(ToastContainer, {\n        transition: Zoom,\n        position: \"top-center\",\n        autoClose: 500,\n        hideProgressBar: true,\n        newestOnTop: false,\n        closeOnClick: true,\n        rtl: false,\n        pauseOnVisibilityChange: true,\n        draggable: true,\n        pauseOnHover: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 25\n        }\n      }))))))), /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.detailNews.detailImg,\n        className: \"card-img-top\",\n        alt: \"...\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(ReadMore, {\n        minHeight: 50,\n        defaultShownOnLess: /*#__PURE__*/React.createElement(\"p\", {\n          dangerouslySetInnerHTML: {\n            __html: truncate(`${this.state.detailDescription}`, {\n              length: 900\n            })\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 21\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        dangerouslySetInnerHTML: {\n          __html: `${this.state.detailDescription}`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 19\n        }\n      }))))), /*#__PURE__*/React.createElement(Comment, {\n        commentId: this.state.detailId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"spinner-border\",\n        role: \"status\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"sr-only\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }\n      }, \"Loading...\")));\n    }\n  }\n\n}\nconst bookMarkButtonStyle = {\n  background: \"none\",\n  border: \"none\"\n};\nconst extraClass = {\n  font: \"20px !important\"\n};","map":{"version":3,"sources":["C:/Users/loren/OneDrive/桌面/hw8/newsfront/src/components/details/Details.jsx"],"names":["React","Component","Consumer","axios","queryString","Moment","FacebookIcon","EmailShareButton","FacebookShareButton","TwitterShareButton","TwitterIcon","EmailIcon","ReadMore","truncate","Comment","Spinner","Container","IsBookMarkDetail","NotBookMarkDetail","ReactTooltip","ToastContainer","toast","Zoom","Details","constructor","props","AddToBookMark","localStorage","getItem","JSON","stringify","state","detailId","setItem","detailNews","setState","isBookMarked","detailTitle","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","removeItem","detailDescription","hidden","componentDidMount","value","parse","location","search","id","get","then","res","data","catch","err","console","log","render","length","detailDate","extraClass","detailUrl","bookMarkButtonStyle","detailImg","__html","background","border","font"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,eAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,SACEC,YADF,EAEEC,gBAFF,EAGEC,mBAHF,EAIEC,kBAJF,EAKEC,WALF,EAMEC,SANF,QAOO,aAPP,C,CAQA;;AACA,OAAOC,QAAP,MAAqB,kCAArB;AACA,OAAOC,QAAP,MAAqB,iBAArB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,OAAT,EAAkBC,SAAlB,QAAmC,iBAAnC;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,iBAAP,MAA8B,oBAA9B;AACA,OAAOC,YAAP,MAAyB,eAAzB;AACA,SAASC,cAAT,EAAyBC,KAAzB,EAAgCC,IAAhC,QAA4C,gBAA5C;AACA,OAAO,uCAAP;AAEA,eAAe,MAAMC,OAAN,SAAsBtB,SAAtB,CAAgC;AAC7CuB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAWnBC,aAXmB,GAWH,MAAM;AACpB,UAAIC,YAAY,CAACC,OAAb,CAAqBC,IAAI,CAACC,SAAL,CAAe,KAAKC,KAAL,CAAWC,QAA1B,CAArB,MAA8D,IAAlE,EAAwE;AACtEL,QAAAA,YAAY,CAACM,OAAb,CACEJ,IAAI,CAACC,SAAL,CAAe,KAAKC,KAAL,CAAWC,QAA1B,CADF,EAEEH,IAAI,CAACC,SAAL,CAAe,KAAKC,KAAL,CAAWG,UAA1B,CAFF;AAIA,aAAKC,QAAL,CAAc;AACZC,UAAAA,YAAY,EAAE;AADF,SAAd;AAGAf,QAAAA,KAAK,CAAE,UAAS,KAAKU,KAAL,CAAWG,UAAX,CAAsBG,WAAY,EAA7C,EAAgD;AACnDC,UAAAA,QAAQ,EAAE,YADyC;AAEnDC,UAAAA,SAAS,EAAE,IAFwC;AAGnDC,UAAAA,eAAe,EAAE,IAHkC;AAInDC,UAAAA,YAAY,EAAE,IAJqC;AAKnDC,UAAAA,YAAY,EAAE,IALqC;AAMnDC,UAAAA,SAAS,EAAE;AANwC,SAAhD,CAAL;AAQD,OAhBD,MAgBO;AACLhB,QAAAA,YAAY,CAACiB,UAAb,CAAwBf,IAAI,CAACC,SAAL,CAAe,KAAKC,KAAL,CAAWC,QAA1B,CAAxB;AACA,aAAKG,QAAL,CAAc;AACZC,UAAAA,YAAY,EAAE;AADF,SAAd;AAGAf,QAAAA,KAAK,CAAE,cAAa,KAAKU,KAAL,CAAWG,UAAX,CAAsBG,WAAY,EAAjD,EAAoD;AACvDC,UAAAA,QAAQ,EAAE,YAD6C;AAEvDC,UAAAA,SAAS,EAAE,IAF4C;AAGvDC,UAAAA,eAAe,EAAE,IAHsC;AAIvDC,UAAAA,YAAY,EAAE,IAJyC;AAKvDC,UAAAA,YAAY,EAAE,IALyC;AAMvDC,UAAAA,SAAS,EAAE;AAN4C,SAApD,CAAL;AAQD,OA9BmB,CAgCpB;AACA;AACA;AACA;AACA;AACA;AACA;;AACD,KAlDkB;;AAEjB,SAAKZ,KAAL,GAAa;AACXK,MAAAA,YAAY,EAAE,KADH;AAEXF,MAAAA,UAAU,EAAE,EAFD;AAGXW,MAAAA,iBAAiB,EAAE,EAHR;AAIXb,MAAAA,QAAQ,EAAE,EAJC;AAKXc,MAAAA,MAAM,EAAE;AALG,KAAb;AAOD;;AA0CD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,KAAK,GAAG5C,WAAW,CAAC6C,KAAZ,CAAkB,KAAKxB,KAAL,CAAWyB,QAAX,CAAoBC,MAAtC,CAAd;AACA,UAAMC,EAAE,GAAGJ,KAAK,CAACI,EAAjB;AAEAjD,IAAAA,KAAK,CACFkD,GADH,CACQ,eAAcD,EAAG,EADzB,EAEGE,IAFH,CAESC,GAAD,IAAS;AACb,WAAKpB,QAAL,CAAc;AACZD,QAAAA,UAAU,EAAEqB,GAAG,CAACC,IADJ;AAEZX,QAAAA,iBAAiB,EAAEU,GAAG,CAACC,IAAJ,CAASX,iBAFhB;AAGZb,QAAAA,QAAQ,EAAEuB,GAAG,CAACC,IAAJ,CAASxB,QAHP;AAIZc,QAAAA,MAAM,EAAE;AAJI,OAAd;AAMD,KATH,EAUGW,KAVH,CAUUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAVlB;AAWD;;AAEDG,EAAAA,MAAM,GAAG;AACP,UAAM;AAAE7B,MAAAA;AAAF,QAAe,KAAKD,KAA1B;;AACA,QAAIC,QAAQ,CAAC8B,MAAT,IAAmB,CAAvB,EAA0B;AACxB,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,SAAS,EAAC,kCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAK/B,KAAL,CAAWG,UAAX,CAAsBG,WADzB,CADF,eAIE;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAC,aAAlB;AAAgC,QAAA,MAAM,EAAC,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKN,KAAL,CAAWG,UAAX,CAAsB6B,UADzB,CADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADF,eAOE;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEE;AAAK,QAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,oBAAS,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,YAAD;AAAc,QAAA,MAAM,EAAC,OAArB;AAA6B,QAAA,KAAK,EAAEC,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE,oBAAC,mBAAD;AACE,QAAA,GAAG,EAAE,KAAKjC,KAAL,CAAWG,UAAX,CAAsB+B,SAD7B;AAEE,QAAA,OAAO,EAAC,mBAFV;AAGE,QAAA,SAAS,EAAC,QAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKE,oBAAC,YAAD;AAAc,QAAA,IAAI,EAAE,EAApB;AAAwB,QAAA,KAAK,EAAE,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CAFF,CADF,CADF,eAaE;AACE,QAAA,SAAS,EAAC,mCADZ,CAEE;AACA;AACA;AAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAME;AAAG,oBAAS,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,YAAD;AAAc,QAAA,MAAM,EAAC,OAArB;AAA6B,QAAA,KAAK,EAAED,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE,oBAAC,kBAAD;AACE,QAAA,GAAG,EAAE,KAAKjC,KAAL,CAAWG,UAAX,CAAsB+B,SAD7B;AAEE,QAAA,QAAQ,EAAE,CAAC,kBAAD,CAFZ;AAGE,QAAA,SAAS,EAAC,QAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKE,oBAAC,WAAD;AAAa,QAAA,IAAI,EAAE,EAAnB;AAAuB,QAAA,KAAK,EAAE,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CAFF,EAQwB,GARxB,CANF,CAbF,eA8BE;AAAK,QAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,oBAAS,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,YAAD;AAAc,QAAA,MAAM,EAAC,OAArB;AAA6B,QAAA,KAAK,EAAED,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE,oBAAC,gBAAD;AACE,QAAA,GAAG,EAAE,KAAKjC,KAAL,CAAWG,UAAX,CAAsB+B,SAD7B;AAEE,QAAA,OAAO,EAAC,mBAFV;AAGE,QAAA,IAAI,EAAC,EAHP;AAIE,QAAA,SAAS,EAAC,EAJZ;AAKE,uBAAY,SALd;AAME,0BAAe,KANjB;AAOE,QAAA,KAAK,EAAC,OAPR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBASE,oBAAC,SAAD;AAAW,QAAA,IAAI,EAAE,EAAjB;AAAqB,QAAA,KAAK,EAAE,IAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATF,CAFF,CADF,CA9BF,eA8CE;AAAK,QAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,oBAAS,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,YAAD;AAAc,QAAA,MAAM,EAAC,OAArB;AAA6B,QAAA,KAAK,EAAED,UAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AACE,QAAA,KAAK,EAAEE,mBADT;AAEE,QAAA,OAAO,EAAE,KAAKxC,aAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIGC,YAAY,CAACC,OAAb,CACCC,IAAI,CAACC,SAAL,CAAe,KAAKC,KAAL,CAAWC,QAA1B,CADD,MAEK,IAFL,gBAGC,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHD,gBAKC,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATJ,CAFF,eAcE,oBAAC,cAAD;AACE,QAAA,UAAU,EAAEV,IADd;AAEE,QAAA,QAAQ,EAAC,YAFX;AAGE,QAAA,SAAS,EAAE,GAHb;AAIE,QAAA,eAAe,MAJjB;AAKE,QAAA,WAAW,EAAE,KALf;AAME,QAAA,YAAY,MANd;AAOE,QAAA,GAAG,EAAE,KAPP;AAQE,QAAA,uBAAuB,MARzB;AASE,QAAA,SAAS,MATX;AAUE,QAAA,YAAY,MAVd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdF,CADF,CA9CF,CADF,CAFF,CAPF,CAJF,eA6FE;AACE,QAAA,GAAG,EAAE,KAAKS,KAAL,CAAWG,UAAX,CAAsBiC,SAD7B;AAEE,QAAA,SAAS,EAAC,cAFZ;AAGE,QAAA,GAAG,EAAC,KAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA7FF,eAkGE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,QAAD;AACE,QAAA,SAAS,EAAE,EADb;AAEE,QAAA,kBAAkB,eAChB;AACE,UAAA,uBAAuB,EAAE;AACvBC,YAAAA,MAAM,EAAEvD,QAAQ,CAAE,GAAE,KAAKkB,KAAL,CAAWc,iBAAkB,EAAjC,EAAoC;AAClDiB,cAAAA,MAAM,EAAE;AAD0C,aAApC;AADO,WAD3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAYE;AACE,QAAA,uBAAuB,EAAE;AACvBM,UAAAA,MAAM,EAAG,GAAE,KAAKrC,KAAL,CAAWc,iBAAkB;AADjB,SAD3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,CADF,CAFF,CAlGF,CADF,eA2HE,oBAAC,OAAD;AAAS,QAAA,SAAS,EAAE,KAAKd,KAAL,CAAWC,QAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA3HF,CADF;AA+HD,KAhID,MAgIO;AACL,0BACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAgC,QAAA,IAAI,EAAC,QAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAM,QAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CADF,CADF;AAOD;AACF;;AA1N4C;AA6N/C,MAAMkC,mBAAmB,GAAG;AAC1BG,EAAAA,UAAU,EAAE,MADc;AAE1BC,EAAAA,MAAM,EAAE;AAFkB,CAA5B;AAKA,MAAMN,UAAU,GAAG;AACjBO,EAAAA,IAAI,EAAE;AADW,CAAnB","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Consumer } from \"../../context\";\r\nimport axios from \"axios\";\r\nimport queryString from \"query-string\";\r\nimport Moment from \"react-moment\";\r\nimport {\r\n  FacebookIcon,\r\n  EmailShareButton,\r\n  FacebookShareButton,\r\n  TwitterShareButton,\r\n  TwitterIcon,\r\n  EmailIcon,\r\n} from \"react-share\";\r\n// import Bookmark from \"../Navbars/Bookmark\";\r\nimport ReadMore from \"@jamespotz/react-simple-readmore\";\r\nimport truncate from \"lodash/truncate\";\r\nimport Comment from \"./Comment\";\r\nimport { Spinner, Container } from \"react-bootstrap\";\r\nimport IsBookMarkDetail from \"./IsBookMarkDetail\";\r\nimport NotBookMarkDetail from \"./NotBookMarkDetai\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport { ToastContainer, toast, Zoom } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nexport default class Details extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isBookMarked: false,\r\n      detailNews: {},\r\n      detailDescription: \"\",\r\n      detailId: \"\",\r\n      hidden: false,\r\n    };\r\n  }\r\n\r\n  AddToBookMark = () => {\r\n    if (localStorage.getItem(JSON.stringify(this.state.detailId)) === null) {\r\n      localStorage.setItem(\r\n        JSON.stringify(this.state.detailId),\r\n        JSON.stringify(this.state.detailNews)\r\n      );\r\n      this.setState({\r\n        isBookMarked: true,\r\n      });\r\n      toast(`Saving ${this.state.detailNews.detailTitle}`, {\r\n        position: \"top-center\",\r\n        autoClose: 3000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n      });\r\n    } else {\r\n      localStorage.removeItem(JSON.stringify(this.state.detailId));\r\n      this.setState({\r\n        isBookMarked: false,\r\n      });\r\n      toast(`Removing - ${this.state.detailNews.detailTitle}`, {\r\n        position: \"top-center\",\r\n        autoClose: 3000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n      });\r\n    }\r\n\r\n    // localStorage.getItem(JSON.stringify(this.state.detailId)) === null\r\n    //   ? this.setState({\r\n    //       isBookMarked: false,\r\n    //     })\r\n    //   : this.setState({\r\n    //       isBookMarked: true,\r\n    //     });\r\n  };\r\n  // toastAdd = () =>\r\n  //   toast(\"🦄 Wow so easy!\", {\r\n  //     position: \"top-center\",\r\n  //     autoClose: 5000,\r\n  //     hideProgressBar: true,\r\n  //     closeOnClick: true,\r\n  //     pauseOnHover: true,\r\n  //     draggable: true,\r\n  //   });\r\n  // 父组件是一个页面，子组件是这个页面里面的评论区。在父组件里面先获取这个页面的url的参数，然后用把这个参数传给子组件。\r\n  componentDidMount() {\r\n    const value = queryString.parse(this.props.location.search);\r\n    const id = value.id;\r\n\r\n    axios\r\n      .get(`/article?id=${id}`)\r\n      .then((res) => {\r\n        this.setState({\r\n          detailNews: res.data,\r\n          detailDescription: res.data.detailDescription,\r\n          detailId: res.data.detailId,\r\n          hidden: true,\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  render() {\r\n    const { detailId } = this.state;\r\n    if (detailId.length != 0) {\r\n      return (\r\n        <div>\r\n          <div className=\"card m-3\">\r\n            <h4 className=\"card-title mt-2 ml-2 font-italic\">\r\n              {this.state.detailNews.detailTitle}\r\n            </h4>\r\n            <div className=\"d-flex bd-highlight mb-3\">\r\n              <div className=\"p-2 bd-highlight\">\r\n                <Moment className=\"font-italic\" format=\"MM/DD/YYYY\">\r\n                  {this.state.detailNews.detailDate}\r\n                </Moment>\r\n                <br />\r\n              </div>\r\n              <div className=\"ml-auto p-2 bd-highlight\">\r\n                {/* -------------------------------------share----------------------------------------- */}\r\n                <div className=\"container px-lg-5 border-0\">\r\n                  <div className=\"row mx-lg-n5\">\r\n                    <div className=\"col py-3 px-lg-3 border border-0\">\r\n                      <a data-tip=\"Facebook\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <FacebookShareButton\r\n                          url={this.state.detailNews.detailUrl}\r\n                          hashtag=\"#CSCI_571_NewsApp\"\r\n                          className=\"button\"\r\n                        >\r\n                          <FacebookIcon size={32} round={true} />\r\n                        </FacebookShareButton>\r\n                      </a>\r\n                    </div>\r\n                    <div\r\n                      className=\"col py-3 px-lg-3 border  border-0\"\r\n                      // data-toggle=\"tooltip\"\r\n                      // data-placement=\"top\"\r\n                      // title=\"Twitter\"\r\n                    >\r\n                      <a data-tip=\"Twitter\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <TwitterShareButton\r\n                          url={this.state.detailNews.detailUrl}\r\n                          hashtags={[\"CSCI_571_NewsApp\"]}\r\n                          className=\"button\"\r\n                        >\r\n                          <TwitterIcon size={32} round={true} />\r\n                        </TwitterShareButton>{\" \"}\r\n                      </a>\r\n                    </div>\r\n                    <div className=\"col py-3 px-lg-3 border  border-0\">\r\n                      <a data-tip=\"Email\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <EmailShareButton\r\n                          url={this.state.detailNews.detailUrl}\r\n                          subject=\"#CSCI_571_NewsApp\"\r\n                          body=\"\"\r\n                          separator=\"\"\r\n                          data-toggle=\"tooltip\"\r\n                          data-placement=\"top\"\r\n                          title=\"Email\"\r\n                        >\r\n                          <EmailIcon size={32} round={true} />\r\n                        </EmailShareButton>\r\n                      </a>\r\n                    </div>\r\n                    <div className=\"col py-3 px-lg-5 border  border-0\">\r\n                      <a data-tip=\"Bookmark\">\r\n                        <ReactTooltip effect=\"solid\" style={extraClass} />\r\n                        <button\r\n                          style={bookMarkButtonStyle}\r\n                          onClick={this.AddToBookMark}\r\n                        >\r\n                          {localStorage.getItem(\r\n                            JSON.stringify(this.state.detailId)\r\n                          ) === null ? (\r\n                            <NotBookMarkDetail />\r\n                          ) : (\r\n                            <IsBookMarkDetail />\r\n                          )}\r\n                        </button>\r\n                        <ToastContainer\r\n                          transition={Zoom}\r\n                          position=\"top-center\"\r\n                          autoClose={500}\r\n                          hideProgressBar\r\n                          newestOnTop={false}\r\n                          closeOnClick\r\n                          rtl={false}\r\n                          pauseOnVisibilityChange\r\n                          draggable\r\n                          pauseOnHover\r\n                        />\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <img\r\n              src={this.state.detailNews.detailImg}\r\n              className=\"card-img-top\"\r\n              alt=\"...\"\r\n            />\r\n            <div className=\"card-body\">\r\n              {/* https://www.npmjs.com/package/@jamespotz/react-simple-readmore */}\r\n              <div>\r\n                <ReadMore\r\n                  minHeight={50}\r\n                  defaultShownOnLess={\r\n                    <p\r\n                      dangerouslySetInnerHTML={{\r\n                        __html: truncate(`${this.state.detailDescription}`, {\r\n                          length: 900,\r\n                        }),\r\n                      }}\r\n                    />\r\n                  }\r\n                >\r\n                  <p\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: `${this.state.detailDescription}`,\r\n                    }}\r\n                  />\r\n                </ReadMore>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <Comment commentId={this.state.detailId} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className=\"text-center\">\r\n          <div className=\"spinner-border\" role=\"status\">\r\n            <span className=\"sr-only\">Loading...</span>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst bookMarkButtonStyle = {\r\n  background: \"none\",\r\n  border: \"none\",\r\n};\r\n\r\nconst extraClass = {\r\n  font: \"20px !important\",\r\n};\r\n"]},"metadata":{},"sourceType":"module"}